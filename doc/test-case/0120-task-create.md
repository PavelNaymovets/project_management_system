# 120: Создание задачи

|    Автор    |    Дата    | Средства тестирования | Результат |
|:-----------:|:----------:|:---------------------:|:---------:|
| Наумовец П. | 2023-06-15 |   Postman v10.14.9    |  Прошел   |

## Описание

При создании задачи должны быть заполнены все обязательные поля:

* id - уникальный идентификатор в таблице `обязательное поле`
* name - название `обязательное поле`
* description - описание
* project_id - ссылка на проект в котором поставлена задача `обязательное поле`
* employee_id - ссылка на исполнителя
* labor_costs - трудозатраты `обязательное поле`
* dead_line - крайний срок выполнения `обязательное поле`
* status - статус (новая, в работе, выполнена, закрыта) `обязательное поле`
* author_id - ссылка на автора `обязательное поле`
* created_at - дата создания записи
* updated_at - дата обновления записи

Задача автоматически создается в статусе `новая`. Автоматически назначается автор задачи. Автором задачи может стать
сотрудник, который является участником проекта и имеет статус `активный`.

## Предусловия

Задачи с атрибутами:

* name - новая задача,
* description - описание новой задачи,
* laborCosts - 10,
* deadline - 2023-05-24,
* status - новая

,нет в базе данных. Пользователь авторизован в системе.

## Шаги в postman

* Зайти в коллекцию `projectMenegementSystem`
* Перейти в папку `Task`
* Выбрать запрос `CreateTask`
* Нажать `Send`

Выполнится HTTP запрос с методом `POST` на endpoint `http://localhost:8080/pms/api/v1/task`. Тело запроса:

* Автор является участником проекта и проект существует:

```
{
    "name": "Новая задача",
    "project": {
        "id": 1
    },
    "description": "Описание новой задачи",
    "laborCosts": "10",
    "deadline": "2023-05-24"
}
```

* Автор не является участником проекта:

```
{
    "name": "Новая задача",
    "project": {
        "id": 2
    },
    "description": "Описание новой задачи",
    "laborCosts": "10",
    "deadline": "2023-05-24"
}
```

* Автор является участником проекта и проект не существует:

```
{
    "name": "Новая задача",
    "project": {
        "id": 10
    },
    "description": "Описание новой задачи",
    "laborCosts": "10",
    "deadline": "2023-05-24"
}
```

## Ожидаемый результат

В базе данных, в таблице `task`, появилась строка с данными новой задачи. Вернется ответ со статус 
кодом `200` и dto созданной задачи.

## Фактический результат

Задача добавлена:

![Image alt]()

* Автор является участником проекта и проект существует:

```
{
    "name": "Новая задача",
    "project": {
        "id": 1
    },
    "description": "Описание новой задачи",
    "laborCosts": "10",
    "deadline": "2023-05-24"
}
```

* Автор не является участником проекта:

```
{
    "statusCode": 400,
    "message": "Employee is not project member. He can`t be author or employee for this task. Login: romanova.dina"
}
```

* Автор является участником проекта и проект не существует:

```
{
    "statusCode": 404,
    "message": "Project not found. ID: 10"
}
```